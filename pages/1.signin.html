<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../assets/CSS/1-sign.css" />
    <title>Document</title>
  </head>

  <body class="body">
    <div class="full">
      <h1>Welcome! to Rishi Organic Market</h1>
      <form class="form" id="form">
        <div>
          <img
            src="../assets/image/login_farmer.png"
            alt="farmer"
            width="500px"
          />
        </div>
        <div>
          <label>Full Name:</label><br />
          <input
            type="text"
            id="full_name"
            pattern="[a-zA-Z]+\s[a-zA-Z]+"
            autocomplete="off"
            required
          /><br />
          <label>Mail id:</label><br />
          <input
            type="email"
            id="email"
            autocomplete="hgfgtyfygh"
            required
          /><br />
          <label>Phone no:</label><br />
          <input
            type="tel"
            id="phone_number"
            pattern="[0-9]{10}"
            maxlength="10"
            minlength="10"
            autocomplete="hgfgtyfygh"
            required
          /><br />
          <label>Password:</label><br />
          <input
            id="password"
            pattern="^(?!\s)(?!.*\s)[^\s]{6,}$"
            type="password"
            autocomplete="hg"
            required
          />
          <br />
          <label for="address">Address</label> <br />
          <textarea
            required
            pattern="[a-zA-Z]"
            name="address"
            id="address"
            cols="45"
            rows="5"
          ></textarea>
          <br />
          <label>Confirm Password:</label><br />
          <input
            type="password"
            id="conform_password"
            autocomplete="hg"
            pattern="^(?!\s)(?!.*\s)[^\s]{6,}$"
            required
          /><br />

          <button class="sub" type="submit" value="submit" onclick="sign()">
            sign up
          </button>
        </div>
      </form>

      <footer>
        <div>
          <button class="log" type="submit" onclick="log()">Login</button>

          <small><p>If you already sign in! Please Login..</p></small>
        </div>
      </footer>
    </div>

    <script>
      // create an array and get the detail from form

      let signUpform = document.getElementById("form");
      document.createElement("user_info");
      // code for the process while click the sign up button

      signUpform.addEventListener("submit", function (event) {
        event.preventDefault();
        let array = [];
        if (localStorage.getItem("user_info") != null) {
          array = JSON.parse(localStorage.getItem("user_info"));
        }

        let match = false;

        // to get the value from form by their ID

        const id = Date.now();
        console.log(id);
        const FullName = document.getElementById("full_name").value;
        const Email = document.getElementById("email").value.toLowerCase();
        const Phone_number = document.getElementById("phone_number").value;
        const Password = document.getElementById("password").value;
        const Home_Address = document.getElementById("address").value;
        const Confirm_Password =
          document.getElementById("conform_password").value;

        // code for check password and confirm password are same or not
        if (Password != Confirm_Password) {
          alert("Password and Confirm password are not match");
          return false;
        } else {
          for (let i = 0; i < array.length; i++) {
            if (Email == array[i]["Email"]) {
              match = true;
            }
          }
        }

        // code for create the user details in an array by object
        if (match == true) {
          alert("Email is already Exist");
          return false;
        } else {
          let userObj = {
            FullName,
            id,
            Email,
            Phone_number,
            Password,
            Home_Address,
            Confirm_Password,
            points: 0,
          };
          console.log(userObj);

          array.push(userObj);
          const str = JSON.stringify(array);
          localStorage.setItem("user_info", str);
          console.log(str);
          alert("You created your account successfully");
          window.location.href = "/pages/2.Login.html";
        }
      });

      function log() {
        window.location.href = "/pages/2.Login.html";
      }

      // for create  user id
      const start = Date.now();
    </script>
  </body>
</html>
