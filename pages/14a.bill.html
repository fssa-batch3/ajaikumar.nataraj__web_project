<!-- <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Document</title>
    <link rel="stylesheet" href="../assets/CSS/14a-bill.css" />
  </head>
  <body class="body">
    <header>
      <div>
        <a href="../pages/3.home.html"
          ><img src="../assets/image/arrowback.png" alt="ab" width="20px"
        /></a>
      </div>
      <div class="header">
        <img src="../assets/image/logo.png" alt="logo" width="150px" />
      </div>
    </header>
    <div class="details">
      <h3>Your pickup details:</h3>
      <div class="detail">
         <input type="text" placeholder="Name" />
        <input type="number" placeholder="Phone number" />
        <input type="text" placeholder="Address" />
        <input type="date" placeholder="Pickup date" /> 
        <button class="name">Name</button>
        <button class="phno">Phone Number</button>
        <button class="add">Address</button>
        <button class="pickup">Pickup Date</button>
      </div>
    </div>
    <div class="main">
      <h3>Your Product's Bill</h3>
      <table aria-describedby="bil">
        <tr>
          <th>Products Name</th>
          <th>Price</th>
          <th>Quantity</th>
          <th>Amount</th>
        </tr>
        <tr>
          <td>Banana</td>
          <td>Rs.20 /kg</td>
          <td>150 kg</td>
          <td>Rs.3000</td>
        </tr>
        <div class="total-amount">
          <tr>
            <td></td>
            <td>Total</td>
            <td>Amount</td>
            <td>Rs.3000</td>
          </tr>
        </div>
      </table>
    </div>
    <div class="id">
      <p>Order ID: 1006738360</p>
      <p>Toll-free no:1800 123 4000</p>
    </div>
    <footer class="footer">
      <p class="foot-p">
        <img
          src="../assets/image/smiling-face.gif"
          alt="smiling-face"
          width="50px"
        />
        Thanks for Selling your products
        <img
          src="../assets/image/sparkling-heart.gif"
          alt="heart"
          width="50px"
        />
        We always Welcomes you!
      </p>
    </footer>

    <script>
      function output() {
        const user_name = localStorage.getItem("user_name");
        document.getElementsByClassName("name")[0].innerHTML = user_name;
        console.log(user_name);

        const user_add = localStorage.getItem("user_add");
        document.getElementsByClassName("add")[0].innerHTML = user_add;
        console.log(user_add);

        const user_phno = localStorage.getItem("user_phno");
        document.getElementsByClassName("phno")[0].innerHTML = user_phno;
        console.log(user_phno);

        const user_pickup = localStorage.getItem("user_pickup");
        document.getElementsByClassName("pickup")[0].innerHTML = user_pickup;
        console.log(user_pickup);
      }
      output();
    </script>
  </body>
</html> -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bill</title>
    <link rel="stylesheet" href="../assets/CSS/9a-bill.css" />
  </head>
  <body>
    <header>
      <img src="../assets/image/logo.png" alt="logo" width="130px" />
      <h4>Your Product's Bill</h4>
      <img src="../assets/image/profile.png" alt="profile" width="110px" />
    </header>

    <table>
      <script>
        let Card = JSON.parse(localStorage.getItem("newly_added"));

        let total = 0;

        let btn = document.createElement("button");
        btn.innerText = "Save & Upload";
        btn.setAttribute("id", "submit");
        document.querySelector("table").append(btn);

        for (let i = 0; i < Card.length; i++) {
          let table_card = document.createElement("table");

          let th_tr1 = document.createElement("tr");
          table_card.append(th_tr1);

          let th1_tr = document.createElement("th");
          th1_tr.innerText = "Products Name";
          th_tr1.append(th1_tr);

          let th2_tr = document.createElement("th");
          th2_tr.innerText = "Quantity";
          th_tr1.append(th2_tr);

          let th3_tr = document.createElement("th");
          th3_tr.innerText = "Amount";
          th_tr1.append(th3_tr);

          let td_tr2 = document.createElement("tr");
          table_card.append(td_tr2);

          let td1_tr = document.createElement("td");
          td1_tr.innerText = Card[i]["Name"];
          td_tr2.append(td1_tr);

          let td2_tr = document.createElement("td");
          td2_tr.innerText = Card[i]["Qty"] + " kg";
          td_tr2.append(td2_tr);

          let td3_tr = document.createElement("td");
          td3_tr.innerText = "Rs. " + Card[i]["Price"] * Card[i]["Qty"];
          td_tr2.append(td3_tr);

          total += parseInt(Card[i]["Price"]) * parseInt(Card[i]["Qty"]);

          btn.addEventListener(
            "click",
            function (event) {
              event.preventDefault();
              let Data = JSON.parse(localStorage.getItem("newly_added"));
              let exists = JSON.parse(localStorage.getItem("product_details"));

              let findIndex = Card.indexOf(Card);
              // let msg = confirm("Are you sure you want to Update this product");
              // if (msg !== true) {
              //   return;
              // } else {
              if (exists === null) {
                localStorage.setItem("product_details", JSON.stringify(Data));
              } else {
                for (let i = 0; i < Data.length; i++) {
                  exists.push(Data[i]);
                }

                localStorage.setItem("product_details", JSON.stringify(exists));
              }
              // localStorage.setItem("product_details", JSON.stringify(exists));
              localStorage.removeItem("newly_added");
              window.location.href = "/pages/10.upload.html";
            }
            // }
          );

          document.querySelector("table").append(table_card);
        }
      </script>
      <div class="details">
        <h3>Your Pickup details:</h3>
        <div class="detail">
          <input type="text" id="First_name" placeholder="name" />
          <input
            type="number"
            id="Phone_Number"
            placeholder="Phone number"
            maxlength="10"
          />
          <input type="text" id="Land_Address" placeholder="address" />
          <input type="date" id="Pickup_date" placeholder="Pickup date" />
        </div>
      </div>
    </table>
    <div class="amount_total">
      <table>
        <tr>
          <td>Total Amount</td>
          <td></td>
          <td id="operoation"></td>
        </tr>
      </table>
    </div>
    <footer class="footer">
      <p class="foot-p">
        <img
          src="../assets/image/smiling-face.gif"
          alt="smiling-face"
          width="50px"
        />
        Thanks for Selling your products
        <img
          src="../assets/image/sparkling-heart.gif"
          alt="heart"
          width="50px"
        />
        We always Welcomes you!
      </p>
    </footer>
    <script>
      let total_value = document.getElementById("operoation");
      total_value.append("â‚¹" + total);
      const oneUser = JSON.parse(localStorage.getItem("logIn"));

      const user_info = JSON.parse(localStorage.getItem("user_info"));
      let select_user = user_info.find(function (event) {
        let customerEmail = event["Email"];
        if (user_info == customerEmail) {
          return true;
        } else if (oneUser == customerEmail) {
          return true;
        }
      });

      console.log(select_user);
      // to get value from registration form
      const phNo = document.getElementById("Phone_Number");
      const userName = document.getElementById("First_name");
      const transport_DOB = document.getElementById("Pickup_date");
      const Land_Address = document.getElementById("Land_Address");

      // Compare the values

      phNo.value = select_user["Phone_number"];
      userName.value = select_user["FullName"];
      Land_Address.value = select_user["Land_Address"];
      transport_DOB.value = select_user["transport_DOB"];
    </script>
  </body>
</html>
