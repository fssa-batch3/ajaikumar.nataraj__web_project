<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <title>Document</title>
    <link rel="stylesheet" href="../assets/CSS/10-upload.css" />
  </head>
  <body>
    <header>
      <div class="head">
        <img
          src="../assets/image/arrowback.png"
          alt="arrow-back"
          width="50px"
        />
      </div>
      <div class="title"><h2>Hi Farmer...</h2></div>
      <button onclick="history()">History</button>
      <img
        src="../assets/image/profile.png"
        alt="profile"
        onclick="profile()"
        width="80px"
        height="80px"
      />
    </header>

    <a href="#steps"> <button class="btn">Help</button></a>

    <section class="output_section"></section>

    <a href="../assets/image/apple.jpg"></a>
    <section class="sec"></section>

    <form method="get" class="full-card" id="form">
      <h3>Upload your products</h3>
      <div class="full_list">
        <div class="list">
          <nav>
            <label for="url">Enter Your Url</label>
            <input
              required="required"
              type="url"
              id="url"
              placeholder="Enter Url"
            />
          </nav>
          <nav>
            <label for="name">Enter Your Product Name</label>
            <input
              required="required"
              type="text"
              id="product"
              placeholder="Your Product Name"
            />
          </nav>
          <nav>
            <label for="type">Enter Your Product Type</label>
            <input
              required="required"
              list="Types"
              name="type"
              id="type"
              placeholder="Type"
              autocomplete="off"
            />
            <datalist id="Types">
              <option value="Fruit"></option>
              <option value="Vegetable"></option>
              <option value="Coffee & Tea"></option>
              <option value="Cereals & Grains"></option>
            </datalist>
          </nav>
        </div>
        <div class="list">
          <nav>
            <label for="price">Enter Your Price</label>
            <input
              required="required"
              type="number"
              id="price"
              placeholder="Enter Your Price"
            />
          </nav>
          <nav>
            <label for="qty">Enter Your Quantity</label>
            <input
              required="required"
              type="number"
              id="qty"
              placeholder="Enter Your Product Quantity"
            />
          </nav>
          <nav>
            <label for="place">Enter your Pickup Address</label>
            <input
              required="required"
              type="text"
              id="place"
              placeholder="Enter your Pickup Address"
            />
          </nav>
        </div>
      </div>
      <div class="full_list">
        <nav>
          <label for="date">Select Your Pickup Date</label><br />
          <input
            type="date"
            required="required"
            id="date"
            placeholder="Pickup date"
          />
        </nav>
        <br />
        <nav>
          <label for="description">
            Type description about your products
          </label>
          <br />
          <input
            required="required"
            type="text"
            id="description"
            class="description"
            placeholder="Description about your products"
          />
        </nav>
      </div>
      <div class="btn-card">
        <button class="btn" id="add-btn">Add</button>
        <!-- <button class="btn" type="reset" id="cancel">Cancel</button> -->
      </div>
    </form>

    <div class="add_detail"></div>

    <footer id="form" class="footer">
      <button type="button" onclick="submit()">Submit</button>
    </footer>

    <div id="steps" class="steps">
      <h3>Steps to Upload your product details:</h3>
      <ol>
        <li>Enter your valid details in the above form.</li>
        <li>
          After filling the form click the "Add" button in the form to add the
          details.
        </li>
        <li>
          After adding all the details click "Submit" button to upload all your
          products.
        </li>
      </ol>
    </div>

    <script>
      // let Card = JSON.parse(localStorage.getItem("newly_added"));

      // let table_card = document.createElement("table");

      // let th_tr1 = document.createElement("tr");
      // table_card.append(th_tr1);

      // let th1_tr = document.createElement("th");
      // th1_tr.innerText = "Products Name";
      // th_tr1.append(th1_tr);

      // let th2_tr = document.createElement("th");
      // th2_tr.innerText = "Quantity";
      // th_tr1.append(th2_tr);

      // let th4_tr = document.createElement("th");
      // th4_tr.innerText = "Price";
      // th_tr1.append(th4_tr);

      // for (let i = 0; i <= Card.length; i++) {
      //   let td_tr2 = document.createElement("tr");
      //   table_card.append(td_tr2);

      //   let td1_tr = document.createElement("td");
      //   td1_tr.innerText = Card[i]["Name"];
      //   td_tr2.append(td1_tr);
      //   console.log(Card);

      //   let td2_tr = document.createElement("td");
      //   td2_tr.innerText = Card[i]["Qty"] + " kg";
      //   td_tr2.append(td2_tr);

      //   let td4_tr = document.createElement("td");
      //   td4_tr.innerText = "Rs." + Card[i]["Price"];
      //   td_tr2.append(td4_tr);

      //   document.querySelector(".add_detail").append(table_card);
      // }
      function submit() {
        window.location.href = "/pages/11.place-products.html";
      }
      function history() {
        window.location.href = "/pages/10.a.history.html";
      }

      uploadForm = document.getElementById("form");
      let id = JSON.parse(localStorage.getItem("user_info"));
      console.log(id);

      let login_id = JSON.parse(localStorage.getItem("logIn"));
      console.log(login_id);

      const get_obj = id.find((e) => e.Email === login_id);
      console.log(get_obj);

      document.createElement("newly_added");

      uploadForm.addEventListener("submit", function (event) {
        event.preventDefault();
        let array = [];
        if (localStorage.getItem("newly_added") != null) {
          array = JSON.parse(localStorage.getItem("newly_added"));
        }

        let match = false;
        const Url = document.getElementById("url").value;
        const Name = document.getElementById("product").value;
        const Type = document.getElementById("type").value;
        const Price = document.getElementById("price").value;
        const Qty = document.getElementById("qty").value;
        const bQty = document.getElementById("qty").value;
        const Place = document.getElementById("place").value;
        const Pickup_date = document.getElementById("date").value;
        const Description = document.getElementById("description").value;
        let ProductId = Date.now();
        let userId = get_obj["id"];
        // let date = get_obj["transport_DOB"];

        let inputDetails = {
          Url,
          Name,
          Type,
          Price,
          Qty,
          bQty,
          Place,
          Description,
          ProductId,
          userId,
          Pickup_date,
          // date,
        };
        // console.log(Product_id);

        array.push(inputDetails);
        const str = JSON.stringify(array);
        localStorage.setItem("newly_added", str);
        console.log(str);
        document.getElementById("form").reset();
      });

      function profile() {
        window.location.href = "/pages/profile.html";
      }
      // const start = Date.now();
    </script>
  </body>
</html>
