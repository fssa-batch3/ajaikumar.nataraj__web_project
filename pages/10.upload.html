<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <title>Document</title>
    <link rel="stylesheet" href="../assets/CSS/10-upload.css" />
  </head>
  <body>
    <header>
      <div class="head">
        <a href="../pages/3.home.html">
          <img
            src="../assets/image/arrowback.png"
            alt="arrow-back"
            width="50px"
        /></a>
      </div>
      <div class="title"><h2>Hi Farmer...</h2></div>
      <button onclick="history()">History</button>
    </header>

    <section class="output_section"></section>

    <a href="../assets/image/apple.jpg"></a>
    <section class="sec"></section>

    <form action="/action_page.php" method="get" class="full-card" id="form">
      <h3>Upload your products</h3>
      <input type="url" id="url" placeholder="Enter Url" />
      <input type="text" id="product" placeholder="Your Product Name" />
      <input list="type" name="type" id="type" placeholder="Type" />
      <datalist id="type">
        <option value="Fruit"></option>
        <option value="Vegetable"></option>
        <option value="Coffe & Tea"></option>
        <option value="Cereals & Grains"></option>
      </datalist>
      <input type="number" id="price" placeholder="Enter Your Price" />
      <input type="number" id="qty" placeholder="Enter Your Product Quantity" />
      <input type="text" id="place" placeholder="Enter your Pickup Address" />
      <input
        type="text"
        id="description"
        class="description"
        placeholder="Description about your products"
      />
      <div class="btn-card">
        <button class="btn" id="add-btn">Add</button>
        <button class="btn" type="reset" id="cancel">Cancel</button>
      </div>
    </form>

    <footer id="form" class="footer">
      <!-- <button id="add">Add</button> -->

      <button type="button" onclick="submit()">Submit</button>
    </footer>

    <script>
      function submit() {
        window.location.href = "/pages/11.place-products.html";
      }
      function history() {
        window.location.href = "/pages/10.a.history.html";
      }

      uploadForm = document.getElementById("form");
      let id = JSON.parse(localStorage.getItem("user_info"));

      document.createElement("product_details");

      uploadForm.addEventListener("submit", function (event) {
        event.preventDefault();
        let array = [];
        if (localStorage.getItem("product_details") != null) {
          array = JSON.parse(localStorage.getItem("product_details"));
        }

        let match = false;
        const Url = document.getElementById("url").value;
        const Name = document.getElementById("product").value;
        const Type = document.getElementById("type").value;
        const Price = document.getElementById("price").value;
        const Qty = document.getElementById("qty").value;
        const Place = document.getElementById("place").value;
        const Description = document.getElementById("description").value;
        let ProductId = Date.now();

        // for (let i = 0; i < array.length; i++) {
        //   if (Email == array[i]["Email"]) {
        //     match = true;
        //   }
        // }

        let inputDetails = {
          Url,
          Name,
          Type,
          Price,
          Qty,
          Place,
          Description,
          Product_id: ProductId,
          id: ProductId,
        };
        // console.log(Product_id);

        array.push(inputDetails);
        const str = JSON.stringify(array);
        localStorage.setItem("product_details", str);
        console.log(str);
        document.getElementById("form").reset();
      });

      // const start = Date.now();
    </script>
  </body>
</html>
